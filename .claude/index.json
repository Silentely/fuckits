{
  "timestamp": "2025-12-12T09:15:03.000Z",
  "project": "fuckits",
  "version": "2.0.0",
  "summary": {
    "total_files_scanned": 25,
    "estimated_total_files": 30,
    "coverage_percentage": 83,
    "truncated": false,
    "scan_strategy": "adaptive_phase_b"
  },
  "modules": [
    {
      "path": "/",
      "name": "root",
      "type": "project_root",
      "language": "JavaScript/Bash",
      "entry_files": [
        "worker.js",
        "main.sh",
        "zh_main.sh"
      ],
      "interface_files": [
        "worker.js"
      ],
      "test_files": [],
      "config_files": [
        "wrangler.toml",
        "package.json",
        "config.example.sh"
      ],
      "coverage": {
        "files_scanned": 14,
        "total_estimated": 16,
        "percentage": 87,
        "gaps": [
          "无自动化测试",
          "缺少 CI/CD 配置"
        ]
      }
    },
    {
      "path": "/scripts",
      "name": "scripts",
      "type": "build_module",
      "language": "Bash",
      "entry_files": [
        "build.sh",
        "deploy.sh",
        "setup.sh",
        "one-click-deploy.sh"
      ],
      "interface_files": [],
      "test_files": [],
      "config_files": [],
      "coverage": {
        "files_scanned": 4,
        "total_estimated": 4,
        "percentage": 100,
        "gaps": [
          "无测试脚本",
          "无回滚功能"
        ]
      }
    }
  ],
  "architecture": {
    "type": "client_server",
    "frontend": "Bash 脚本（main.sh, zh_main.sh）",
    "backend": "Cloudflare Worker（worker.js）",
    "build_system": "npm scripts + bash 自动化",
    "deployment": "Cloudflare Workers + Wrangler CLI"
  },
  "technologies": [
    "JavaScript (ES6+)",
    "Bash",
    "Cloudflare Workers",
    "OpenAI API",
    "Node.js",
    "Wrangler CLI"
  ],
  "key_files": {
    "worker.js": {
      "purpose": "Cloudflare Worker 处理 API 请求并提供安装脚本",
      "lines": 186,
      "functions": [
        "handleGetRequest",
        "handlePostRequest",
        "handleHealthCheck",
        "b64_to_utf8",
        "isBrowserRequest",
        "resolveLocale",
        "checkSharedQuota",
        "resolveSharedLimit",
        "resolveQuotaStore"
      ],
      "features": [
        "Base64 解码嵌入式脚本",
        "共享配额管理（内存/KV）",
        "管理员密钥绕过",
        "健康检查端点",
        "中英双语支持"
      ]
    },
    "main.sh": {
      "purpose": "英文安装和运行脚本",
      "lines": 460,
      "functions": [
        "_fuck_execute_prompt",
        "_install_script",
        "_uninstall_script",
        "_fuck_show_config_help",
        "_fuck_collect_sysinfo_string",
        "_fuck_security_evaluate_command",
        "_fuck_spinner"
      ],
      "features": [
        "安装/临时双模式",
        "系统信息缓存",
        "安全检测引擎",
        "本地/远程 API 切换",
        "配置管理"
      ]
    },
    "zh_main.sh": {
      "purpose": "中文安装和运行脚本",
      "lines": 475,
      "functions": [
        "_fuck_execute_prompt",
        "_install_script",
        "_uninstall_script",
        "_fuck_show_config_help",
        "_fuck_collect_sysinfo_string",
        "_fuck_security_evaluate_command",
        "_fuck_spinner"
      ],
      "features": [
        "完整中文界面",
        "与英文版功能对等",
        "卸载彩蛋"
      ]
    },
    "scripts/build.sh": {
      "purpose": "构建脚本，将安装脚本嵌入 worker.js",
      "lines": 82,
      "platforms": ["macOS", "Linux"]
    },
    "scripts/deploy.sh": {
      "purpose": "部署脚本",
      "lines": 34
    },
    "scripts/one-click-deploy.sh": {
      "purpose": "完整自动化部署工作流",
      "lines": 179,
      "features": ["环境检查", "交互式设置", "错误处理"]
    },
    "scripts/setup.sh": {
      "purpose": "交互式配置向导",
      "lines": 104
    },
    "config.example.sh": {
      "purpose": "配置文件模板",
      "variables": [
        "FUCK_API_ENDPOINT",
        "FUCK_OPENAI_API_KEY",
        "FUCK_ADMIN_KEY",
        "FUCK_OPENAI_MODEL",
        "FUCK_OPENAI_API_BASE",
        "FUCK_ALIAS",
        "FUCK_AUTO_EXEC",
        "FUCK_TIMEOUT",
        "FUCK_DEBUG",
        "FUCK_DISABLE_DEFAULT_ALIAS"
      ]
    }
  },
  "ignore_patterns": [
    "node_modules/**",
    ".git/**",
    ".github/**",
    "dist/**",
    "build/**",
    ".next/**",
    "__pycache__/**",
    "*.lock",
    "*.log",
    "*.bin",
    "*.pdf",
    "*.png",
    "*.jpg",
    "*.jpeg",
    "*.gif",
    "*.mp4",
    "*.zip",
    "*.tar",
    "*.gz",
    ".wrangler/**",
    ".DS_Store",
    "Thumbs.db",
    "logs/**",
    "coverage/**",
    "*.tmp",
    ".temp/**",
    ".serena",
    ".claude",
    ".codex"
  ],
  "documentation": {
    "root_claude_md": {
      "status": "updated",
      "timestamp": "2025-12-12T09:15:03.000Z",
      "sections": [
        "变更记录",
        "项目愿景",
        "架构总览",
        "模块结构图（Mermaid）",
        "模块索引",
        "运行与开发",
        "测试策略",
        "编码规范",
        "AI 使用指引",
        "核心文件说明",
        "配置系统",
        "部署流程",
        "故障排查",
        "项目统计",
        "扩展计划",
        "相关资源"
      ]
    },
    "scripts_claude_md": {
      "status": "updated",
      "timestamp": "2025-12-12T09:15:03.000Z",
      "breadcrumb_added": true,
      "sections": [
        "变更记录",
        "模块职责",
        "入口与启动",
        "脚本详解",
        "关键依赖与配置",
        "数据模型",
        "测试与质量",
        "常见问题",
        "相关文件清单",
        "扩展建议"
      ]
    }
  },
  "coverage_analysis": {
    "scanned_files": [
      "worker.js",
      "main.sh",
      "zh_main.sh",
      "package.json",
      "wrangler.toml",
      "config.example.sh",
      "scripts/build.sh",
      "scripts/deploy.sh",
      "scripts/setup.sh",
      "scripts/one-click-deploy.sh",
      "scripts/CLAUDE.md",
      "CLAUDE.md",
      "README.md",
      "README.en.md",
      "CHANGELOG.md",
      "DEPLOY.md",
      "SUMMARY.md",
      "LICENSE",
      ".gitignore",
      "preview.gif",
      "dist/fuckits.en.sh",
      "dist/fuckits.zh.sh"
    ],
    "missed_patterns": [
      "可能的测试文件在 test/ 或 tests/",
      "CI/CD 配置文件（.github/workflows/）",
      "额外的文档文件"
    ],
    "quality_metrics": {
      "has_automated_tests": false,
      "has_ci_cd": false,
      "has_documentation": true,
      "has_configuration_management": true,
      "has_error_handling": true,
      "has_logging": true,
      "deployment_automation": true,
      "security_engine": true,
      "i18n_support": true,
      "caching_system": true
    }
  },
  "recommendations": {
    "priority_improvements": [
      "添加自动化测试套件",
      "实现 CI/CD 流水线",
      "添加 shell 脚本单元测试",
      "创建集成测试",
      "添加错误监控"
    ],
    "future_enhancements": [
      "多语言支持扩展",
      "命令历史与收藏功能",
      "场景模板",
      "团队配置共享",
      "UI 主题和人设"
    ],
    "next_scan_priorities": [
      "查找测试目录",
      "检查 CI/CD 配置",
      "审查文档完整性",
      "检查配置模板"
    ]
  }
}
